<app-header title="iNatureGram" id='top' 
    (onAction)="reload()" shape="logo" 
    [secondaryShape]="bellIcon" (onSecondaryAction)="goToNotifications()"
    [badge]="(notification$ | async) ? 'warning': ''" class="sticky-top"></app-header>

<div class="chips-filter-container">
    <div class="filters" #optscroll>
        <a [routerLink]="['preference']" class="btn btn-sm btn-pref">
            <cds-icon shape="filter-grid" size="md"></cds-icon>
        </a>
        |
        <span *ngFor="let chips of chipGroup;let last=last">
            <app-chips [chips]="chips.chips" (chipSelect)="selectChip(chips)"
                [multiSelect]="chips.multiSelect"> 
            </app-chips>
            <span *ngIf="!last">| </span>
        </span>
    </div>
</div>

<div class="home">
    <app-gram #grams *ngFor="let observation of observations | async; let isLast = last; trackBy: trackByItems" 
        [class.last]="isLast" 
        [observation]="observation">
    </app-gram>

    <ng-container *ngIf="end">
        <p class="end">{{ (observations | async)?.length ? 
            'Oh hi! You scrolled through all observations!' : 'No observations'}}</p>
        <div *ngIf="!(observations | async)?.length">
        </div>
    </ng-container>

    <div class="spinner-container">
        <span class="spinner spinner-md" [hidden]="!(loading|async)">
            Loading...
        </span>
    </div>

</div>