<!-- <div class="custom-header">
    <a [routerLink]="['/']">
        <cds-icon shape="brand" class="brand"></cds-icon>
    </a>
    <div class="header-actions">
        <clr-dropdown>
        <button class="btn btn-link btn-icon" clrDropdownTrigger aria-label="toggle settings menu">
            <cds-icon shape="cog" size="md"></cds-icon>
            <cds-icon shape="angle" direction="down"></cds-icon>
        </button>
        <clr-dropdown-menu *clrIfOpen clrPosition="bottom-right">
            <a [routerLink]="['preference']" clrDropdownItem>
                <cds-icon shape="cog"></cds-icon>Preferences</a>
            <a [routerLink]="['authorize']" clrDropdownItem>
                <cds-icon shape="key"></cds-icon>Authorize</a>
        </clr-dropdown-menu>
        </clr-dropdown>
    </div>
</div> -->

<app-header title="iNatureGram" id='top' (onAction)="reload()" shape="logo"></app-header>
<div class="home">
    <div class="sort-filter-container">
        <button class="btn btn-link btn-icon btn-sm large-screen-only display-none" >
            <cds-icon shape="angle" direction="left" size="sm" 
                (click)="optscroll.scrollTo({left: optscroll.scrollLeft - 100})">
            </cds-icon>
        </button>
        <div class="sort-filter-options" #optscroll>
            <div *ngFor="let o of sortFilterOptions">            
                
                <clr-dropdown *ngIf="sortFilterOptionsDD[o]" clrPosition="bottom-right">
                    <span clrDropdownTrigger [class.label-selected]="o == sortFilter" class="label">
                        {{o}}{{ (o==sortFilter) ? ':'+sortFilterDD : '' }}<cds-icon shape="angle" size="sm" direction="down"></cds-icon>
                    </span>
                    <clr-dropdown-menu *clrIfOpen >
                        <div *ngFor="let odd of sortFilterOptionsDD[o]" (click)="selectFilterOption(o,odd)"
                        class="p7 filter-options-dd-item" clrDropdownItem>{{odd}}</div>
                    </clr-dropdown-menu>
                </clr-dropdown>
            
                <span class="label clickable" *ngIf="!sortFilterOptionsDD[o]"
                    [class.label-selected]="o == sortFilter" 
                    (click)="selectFilterOption(o)">{{o}}
                </span>


            </div>
            <a [routerLink]="['preference']" class="btn btn-link btn-sm btn-pref">Preferences</a>
        </div>
        <button class="btn btn-link btn-icon btn-sm large-screen-only display-none">
            <cds-icon shape="angle" direction="right" size="sm"
            (click)="optscroll.scrollTo({left: optscroll.scrollLeft + 100})"></cds-icon>
        </button>
    </div>

    <app-gram #grams *ngFor="let observation of observations | async; let isLast = last; trackBy: trackByItems" 
        [class.last]="isLast" 
        [observation]="observation">
    </app-gram>

    <ng-container *ngIf="end">
        <p class="end">Oh hi! You scrolled through all observations!</p>
    </ng-container>

    <div class="spinner-container">
        <span class="spinner spinner-md" [hidden]="!(loading|async)">
            Loading...
        </span>
    </div>

</div>